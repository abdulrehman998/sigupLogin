(this.webpackJsonpweb=this.webpackJsonpweb||[]).push([[0],{202:function(e,a,t){},203:function(e,a,t){},331:function(e,a,t){"use strict";t.r(a);var r=t(0),n=t.n(r),s=t(35),i=t.n(s),c=(t(202),t(203),"localhost"===window.location.hostname.split(":")[0]?"http://localhost:5000":""),l=t(49),d=t.n(l),o=t(24),j=(t(222),t(389)),m=t(387),b=t(390),u=t(105),h=t(388),x=t(399),O=t(45),p=t(398),g=t(396),v=t(10),f=t(6),w=function(e,a){switch(a.type){case"USER_LOGIN":return a.payload.name&&a.payload.email&&a.payload._id?Object(f.a)(Object(f.a)({},e),{},{user:a.payload}):(console.log("invalid data in USER_LOGIN reducer "),e);case"USER_LOGOUT":return Object(f.a)(Object(f.a)({},e),{},{user:null});case"TOGGLE_THEME":return Object(f.a)(Object(f.a)({},e),{},{darkTheme:!e.darkTheme});default:return e}},y=t(1),C=Object(r.createContext)("Initial Value"),S={darkTheme:!0,user:void 0};function E(e){var a=e.children,t=Object(r.useReducer)(w,S),n=Object(v.a)(t,2),s=n[0],i=n[1];return Object(y.jsx)(C.Provider,{value:{state:s,dispatch:i},children:a})}var N=O.a({email:O.b("Enter your email").email("Enter a valid email").required("Email is required"),password:O.b("Enter your password").min(8,"Password should be of minimum 8 characters length").max(10,"No more then 10").required("Password is required")});var T=function(){Object(o.f)();var e=Object(r.useContext)(C),a=(e.state,e.dispatch),t=Object(u.a)({validationSchema:N,initialValues:{email:"",password:""},onSubmit:function(e){console.log("values: ",e),d.a.post("".concat(c,"/api/v1/login"),{email:e.email,password:e.password},{withCredentials:!0}).then((function(e){console.log("res: ",e.data),e.data.email&&a({type:"USER_LOGIN",payload:{name:e.data.name,email:e.data.email,_id:e.data._id,address:e.data.address,phoneNumber:e.data.phoneNumber,gender:e.data.gender}})}))}});return Object(y.jsxs)("div",{style:{margin:"2rem"},children:[Object(y.jsx)("h1",{children:"Login page"}),Object(y.jsx)("form",{onSubmit:t.handleSubmit,children:Object(y.jsx)(p.a,{sx:{flexGrow:1},children:Object(y.jsxs)(g.a,{container:!0,spacing:2,children:[Object(y.jsx)(g.a,{item:!0,md:3}),Object(y.jsx)(g.a,{item:!0,xs:12,md:6,children:Object(y.jsx)(h.a,{fullWidth:!0,color:"primary",id:"outlined-basic",label:"Email",variant:"outlined",name:"email",value:t.values.email,onChange:t.handleChange,error:t.touched.email&&Boolean(t.errors.email),helperText:t.touched.email&&t.errors.email})}),Object(y.jsx)(g.a,{item:!0,md:3}),Object(y.jsx)(g.a,{item:!0,md:3}),Object(y.jsx)(g.a,{item:!0,xs:12,md:6,children:Object(y.jsx)(h.a,{fullWidth:!0,color:"primary",id:"filled-basic",label:"Password",variant:"outlined",type:"password",name:"password",value:t.values.password,onChange:t.handleChange,error:t.touched.password&&Boolean(t.errors.password),helperText:t.touched.password&&t.errors.password})}),Object(y.jsx)(g.a,{item:!0,md:3}),Object(y.jsx)(g.a,{item:!0,xs:12,md:5}),Object(y.jsx)(g.a,{item:!0,xs:12,md:2,children:Object(y.jsx)(x.a,{fullWidth:!0,variant:"contained",color:"primary",type:"submit",children:"Login"})}),Object(y.jsx)(g.a,{item:!0,xs:12,md:5})]})})})]})},L=t(392),k=t(393),q=t(400),P=t(394),_=t(383),G=O.a({name:O.b("Enter your name").required("Name is required"),email:O.b("Enter your email").email("Enter a valid email").required("Email is required"),password:O.b("Enter your password").min(8,"Password should be of minimum 8 characters length").max(10,"No more then 10").required("Password is required"),address:O.b("Enter your Address").required("Address is required"),phoneNumber:O.b("Enter your phone number").min(10,"Phone number should be 10 integers long").required("Phone number is required")});var B=function(){var e=Object(o.f)(),a=Object(u.a)({validationSchema:G,initialValues:{name:"",email:"",phoneNumber:"",password:"",address:""},onSubmit:function(a){var t=document.querySelector('input[name="gender"]:checked').value;d.a.post("".concat(c,"/api/v1/signup"),{name:a.name,email:a.email,gender:t,phoneNumber:Number(a.phoneNumber),password:a.password,address:a.address}).then((function(a){console.log("res: ",a.data),alert("Successfully Signed Up"),e.push("/")}))}});return Object(y.jsxs)("div",{style:{margin:"1rem"},children:[Object(y.jsx)("h1",{children:"Signup page"}),Object(y.jsx)("form",{onSubmit:a.handleSubmit,children:Object(y.jsx)(p.a,{sx:{flexGrow:1},children:Object(y.jsxs)(g.a,{container:!0,spacing:1,children:[Object(y.jsx)(g.a,{item:!0,md:3}),Object(y.jsx)(g.a,{item:!0,xs:12,md:6,children:Object(y.jsx)(h.a,{fullWidth:!0,color:"primary",id:"outlined-basic",label:"Full Name",variant:"standard",name:"name",value:a.values.name,onChange:a.handleChange,error:a.touched.name&&Boolean(a.errors.name),helperText:a.touched.name&&a.errors.name})}),Object(y.jsx)(g.a,{item:!0,md:3}),Object(y.jsx)(g.a,{item:!0,md:3}),Object(y.jsx)(g.a,{item:!0,xs:12,md:6,children:Object(y.jsx)(h.a,{fullWidth:!0,color:"primary",id:"outlined-basic",label:"Email",variant:"standard",name:"email",value:a.values.email,onChange:a.handleChange,error:a.touched.email&&Boolean(a.errors.email),helperText:a.touched.email&&a.errors.email})}),Object(y.jsx)(g.a,{item:!0,md:3}),Object(y.jsx)(g.a,{item:!0,md:3}),Object(y.jsx)(g.a,{item:!0,xs:12,md:6,children:Object(y.jsx)(h.a,{fullWidth:!0,color:"primary",id:"filled-basic",label:"Password",variant:"standard",type:"password",name:"password",value:a.values.password,onChange:a.handleChange,error:a.touched.password&&Boolean(a.errors.password),helperText:a.touched.password&&a.errors.password})}),Object(y.jsx)(g.a,{item:!0,md:3}),Object(y.jsx)(g.a,{item:!0,md:3}),Object(y.jsx)(g.a,{item:!0,xs:12,md:6,children:Object(y.jsx)(h.a,{fullWidth:!0,color:"primary",id:"filled-basic",label:"Address",variant:"standard",type:"address",name:"address",value:a.values.address,onChange:a.handleChange,error:a.touched.address&&Boolean(a.errors.address),helperText:a.touched.address&&a.errors.address})}),Object(y.jsx)(g.a,{item:!0,md:3}),Object(y.jsx)(g.a,{item:!0,md:3}),Object(y.jsx)(g.a,{item:!0,xs:12,md:6,children:Object(y.jsx)(h.a,{fullWidth:!0,name:"phoneNumber",label:"Phone Number",variant:"standard",value:a.values.phoneNumber,onChange:a.handleChange,error:a.touched.phoneNumber&&Boolean(a.errors.phoneNumber),helperText:a.touched.phoneNumber&&a.errors.phoneNumber})}),Object(y.jsx)(g.a,{item:!0,md:3}),Object(y.jsx)(g.a,{item:!0,md:3}),Object(y.jsx)(g.a,{item:!0,xs:12,md:6,children:Object(y.jsxs)(P.a,{component:"fieldset",children:[Object(y.jsx)(_.a,{component:"legend",style:{textAlign:"left"},children:"Gender"}),Object(y.jsxs)(k.a,{"aria-label":"gender",defaultValue:"male",name:"genderParent",children:[Object(y.jsx)(q.a,{name:"gender",value:"male",control:Object(y.jsx)(L.a,{}),label:"Male"}),Object(y.jsx)(q.a,{name:"gender",value:"female",control:Object(y.jsx)(L.a,{}),label:"Female"})]})]})}),Object(y.jsx)(g.a,{item:!0,md:3}),Object(y.jsx)(g.a,{item:!0,xs:12,md:3}),Object(y.jsx)(g.a,{item:!0,xs:12,md:6,children:Object(y.jsx)(x.a,{fullWidth:!0,variant:"contained",type:"submit",children:"Signup"})}),Object(y.jsx)(g.a,{item:!0,xs:12,md:3})]})})})]})},U=t.p+"static/media/splash.257ba1d2.png";var W=function(){return Object(y.jsx)(y.Fragment,{children:Object(y.jsx)("div",{style:{backgroundColor:"#181415",width:"100%",height:"100vh"},children:Object(y.jsx)("img",{style:{width:"100%",position:"fixed",bottom:"0px"},src:U,alt:""})})})},R=t(15),F=t(16),I=t(5),A=t(403),M=t(404),V=t(405),D=t(406),J=t(397),H=t(402),z=t(401),K=t(68),Q=t(179),X=t.n(Q),Y=t(180),Z=t.n(Y),$=t(178),ee=t.n($),ae=["expand"];Object(I.a)((function(e){e.expand;var a=Object(F.a)(e,ae);return Object(y.jsx)(H.a,Object(f.a)({},a))}))((function(e){var a=e.theme;return{transform:e.expand?"rotate(180deg)":"rotate(0deg)",marginLeft:"auto",transition:a.transitions.create("transform",{duration:a.transitions.duration.shortest})}}));function te(e){var a=e.text,t=e.email,n=e.name,s=(e.timestamp,r.useState(!1)),i=Object(v.a)(s,2);i[0],i[1];return Object(y.jsxs)(A.a,{sx:{maxWidth:345},children:[Object(y.jsx)(M.a,{avatar:Object(y.jsx)(J.a,{sx:{bgcolor:K.a[500]},"aria-label":"recipe",children:n}),action:Object(y.jsx)(H.a,{"aria-label":"settings",children:Object(y.jsx)(ee.a,{})}),title:n,subheader:t}),Object(y.jsx)(V.a,{children:Object(y.jsx)(z.a,{variant:"body2",color:"text.secondary",children:a})}),Object(y.jsxs)(D.a,{disableSpacing:!0,children:[Object(y.jsx)(H.a,{"aria-label":"add to favorites",children:Object(y.jsx)(X.a,{})}),Object(y.jsx)(H.a,{"aria-label":"share",children:Object(y.jsx)(Z.a,{})})]})]})}var re=t(386);var ne=function(){var e=Object(r.useState)(""),a=Object(v.a)(e,2),t=a[0],n=a[1],s=Object(r.useContext)(C),i=(s.state,s.dispatch,Object(r.useState)([])),l=Object(v.a)(i,2),o=l[0],j=l[1],m=Object(r.useState)(!1),b=Object(v.a)(m,2),u=b[0],O=b[1],p=Object(r.useState)(!0),g=Object(v.a)(p,2),f=g[0],w=g[1];return Object(r.useEffect)((function(){d.a.get("".concat(c,"/api/v1/posts?page=0"),{withCredentials:!0}).then((function(e){console.log("res +++: ",e.data),j(e.data)}))}),[u]),Object(y.jsxs)("div",{style:{margin:"1rem"},children:[Object(y.jsx)("h1",{children:" Dashboard Page "}),Object(y.jsxs)(re.a,{spacing:2,direction:"column",children:[Object(y.jsx)(h.a,{id:"outlined-multiline-static",multiline:!0,rows:4,value:t,onChange:function(e){n(e.target.value)},placeholder:"What's in your mind"})," ",Object(y.jsx)("br",{}),Object(y.jsx)(x.a,{variant:"contained",onClick:function(){""!==t&&d.a.post("".concat(c,"/api/v1/post"),{postText:t},{withCredentials:!0}).then((function(e){console.log("res: ",e.data),O(!u),alert("post created")}))},children:"Post"})]}),Object(y.jsx)("br",{}),o.map((function(e){return Object(y.jsx)(te,{name:e.name,email:e.email,text:e.postText})})),Object(y.jsx)("br",{}),f?Object(y.jsx)(x.a,{onClick:function(){d.a.get("".concat(c,"/api/v1/posts?page=").concat(o.length),{withCredentials:!0}).then((function(e){var a;if(console.log("res +++: ",e.data),null===(a=e.data)||void 0===a?void 0:a.length){var t=[].concat(Object(R.a)(o),Object(R.a)(e.data));j(t)}else w(!1)}))},children:"Load More"}):null]})};var se=function(){var e,a=Object(o.f)(),t=Object(r.useContext)(C),n=t.state,s=t.dispatch;return Object(r.useEffect)((function(){return d.a.get("".concat(c,"/api/v1/profile"),{withCredentials:!0}).then((function(e){console.log("res: ",e.data),e.data.email?s({type:"USER_LOGIN",payload:{name:e.data.name,email:e.data.email,_id:e.data._id}}):s({type:"USER_LOGOUT"})})).catch((function(e){s({type:"USER_LOGOUT"})})),function(){}}),[]),Object(y.jsxs)(y.Fragment,{children:[(null===n||void 0===n||null===(e=n.user)||void 0===e?void 0:e.email)?Object(y.jsx)(j.a,{className:"bgcolor1",expand:"lg",children:Object(y.jsxs)(m.a,{children:[Object(y.jsx)(j.a.Brand,{href:"#home",children:"React Login project"}),Object(y.jsx)(j.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(y.jsx)(j.a.Collapse,{id:"basic-navbar-nav",children:Object(y.jsx)(b.a,{className:"me-auto",children:Object(y.jsx)(b.a.Link,{onClick:function(){a.push("/")},children:"Dashboard"})})})]})}):Object(y.jsx)(j.a,{className:"bgcolor1",expand:"lg",children:Object(y.jsxs)(m.a,{children:[Object(y.jsx)(j.a.Brand,{href:"#home",children:"React Login project"}),Object(y.jsx)(j.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(y.jsx)(j.a.Collapse,{id:"basic-navbar-nav",children:Object(y.jsxs)(b.a,{className:"me-auto",children:[Object(y.jsx)(b.a.Link,{onClick:function(){a.push("/")},children:"Login"}),Object(y.jsx)(b.a.Link,{onClick:function(){a.push("/signup")},children:"Signup"})]})})]})}),void 0===n.user?Object(y.jsx)(o.c,{children:Object(y.jsx)(o.a,{exact:!0,path:"/",children:Object(y.jsx)(W,{})})}):null,null===n.user?Object(y.jsxs)(o.c,{children:[Object(y.jsx)(o.a,{exact:!0,path:"/",component:T}),Object(y.jsx)(o.a,{path:"/signup",component:B})]}):null,n.user?Object(y.jsx)(o.c,{children:Object(y.jsx)(o.a,{exact:!0,path:"/",children:Object(y.jsx)(ne,{})})}):null]})},ie=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,408)).then((function(a){var t=a.getCLS,r=a.getFID,n=a.getFCP,s=a.getLCP,i=a.getTTFB;t(e),r(e),n(e),s(e),i(e)}))},ce=t(79);i.a.render(Object(y.jsx)(n.a.StrictMode,{children:Object(y.jsx)(E,{children:Object(y.jsx)(ce.a,{children:Object(y.jsx)(se,{})})})}),document.getElementById("root")),ie()}},[[331,1,2]]]);
//# sourceMappingURL=main.837a841a.chunk.js.map